


<div class= "cartcontain">
<h1>Shopping Cart</h1>

<div class="shopping-cart">

  <div class="column-labels">
    <label class="product-image">Image</label>
    <label class="product-details">Product</label>
    <label class="product-price">Price</label>
    <label class="product-quantity">Quantity</label>
    <label class="product-removal">Remove</label>
    <label class="product-line-price">Total</label>
  </div>

<% current_cart.line_items.each do |item| %>
  <div class="product">
    <div class="product-image">
       <% if item.product.images[0].present? %>
       
           <%= image_tag(item.product.images[0], class:"card-img-top", style:"max-width:120px;height:auto")%>
        <% else %>
       <%= image_tag( '/loginImage.jpg', class:"card-img-top", style:"max-width:120px;height:auto") %>
        <% end %>
      
    </div>
    <div class="product-details">
      <div class="product-title">    <%= item.product.name %> </div>
      <p class="product-description"><%= item.product.description %> </p>
    </div>
    <div class="product-price">  <%= item.product.price %></div>
    <div class="product-quantity">
  <%= item.quantity %>
    </div>
    <div class="product-removal">
    <% if false %>
      <button class="remove-product">
         <%= link_to "remove item", item, :method => :delete, :confirm => "Are you sure?",:remote => true %>
      </button>
      <%end%>
      <%= link_to "<button class='remove-product'>remove item</button>".html_safe, item, :method => :delete, :confirm => 'Are you sure?',:remote => true %>
    </div>
    <div class="product-line-price">  <%= item.quantity * item.product.price %> </div>
  </div>

   <% if item==current_cart.line_items.last %>
 <div class="totals">
    <div class="totals-item">
      <label>Subtotal</label>
      <div class="totals-value" id="cart-subtotal"> <%=current_cart.totalPrice %> </div>
    </div>
    <div class="totals-item">
      <label>Tax (8%)</label>
      <div class="totals-value" id="cart-tax"> <%=((current_cart.totalPrice)* 8/100)%>   </div>
    </div>
   
    <div class="totals-item totals-item-total">
      <label>Grand Total</label>
      <div class="totals-value" id="cart-total"> <%=((current_cart.totalPrice)* 1.08)%>  </div>
    </div>
  </div>

   <%end%>

   <% end %>   


    

      <%= button_to "Checkout", checkout_create_path,params: {id: nil}, remote: true, class: "checkout" %>





</div></div>